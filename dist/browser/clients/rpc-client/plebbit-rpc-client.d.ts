import EventEmitter from "events";
import type { CreateNewLocalSubplebbitUserOptions, RpcInternalSubplebbitRecordBeforeFirstUpdateType, SubplebbitEditOptions, RpcLocalSubplebbitUpdateResultType } from "../../subplebbit/types.js";
import type { ModQueuePageIpfs, PageIpfs } from "../../pages/types.js";
import type { DecryptedChallengeAnswer, DecryptedChallengeRequest } from "../../pubsub-messages/types.js";
import type { PlebbitWsServerSettingsSerialized } from "../../rpc/src/types.js";
import type { CommentIpfsType } from "../../publications/comment/types.js";
import { SetNewSettingsPlebbitWsServerSchema } from "../../rpc/src/schema.js";
import * as z from "zod";
import { TypedEmitter } from "tiny-typed-emitter";
import type { PlebbitRpcClientEvents } from "../../types.js";
import type { RpcPublishResult } from "../../publications/types.js";
import type { SubplebbitAddressRpcParam, CidRpcParam, CommentPageRpcParam, SubplebbitPageRpcParam } from "./types.js";
export default class PlebbitRpcClient extends TypedEmitter<PlebbitRpcClientEvents> {
    state: "stopped" | "connecting" | "failed" | "connected";
    subplebbits: string[];
    settings?: PlebbitWsServerSettingsSerialized;
    private _webSocketClient;
    private _websocketServerUrl;
    private _subscriptionEvents;
    private _pendingSubscriptionMsgs;
    private _timeoutSeconds;
    private _openConnectionPromise?;
    private _destroyRequested;
    constructor(rpcServerUrl: string);
    setState(newState: PlebbitRpcClient["state"]): void;
    _init(): Promise<void>;
    destroy(): Promise<void>;
    toJSON(): undefined;
    getSubscription(subscriptionId: number): EventEmitter<[never]>;
    unsubscribe(subscriptionId: number): Promise<void>;
    private _deserializeRpcError;
    private _setErrorName;
    private _assignAdditionalProps;
    emitAllPendingMessages(subscriptionId: number): void;
    getComment(args: CidRpcParam): Promise<CommentIpfsType>;
    getCommentPage(page: CommentPageRpcParam): Promise<PageIpfs>;
    getSubplebbitPage(page: SubplebbitPageRpcParam): Promise<PageIpfs | ModQueuePageIpfs>;
    createSubplebbit(createSubplebbitOptions: CreateNewLocalSubplebbitUserOptions): Promise<RpcInternalSubplebbitRecordBeforeFirstUpdateType>;
    private _initSubscriptionEvent;
    startSubplebbit(subplebbitAddress: SubplebbitAddressRpcParam): Promise<number>;
    stopSubplebbit(subplebbitAddress: SubplebbitAddressRpcParam): Promise<void>;
    editSubplebbit(subplebbitAddress: string, subplebbitEditOptions: SubplebbitEditOptions): Promise<RpcLocalSubplebbitUpdateResultType>;
    deleteSubplebbit(subplebbitAddress: SubplebbitAddressRpcParam): Promise<void>;
    subplebbitUpdateSubscribe(subplebbitAddress: SubplebbitAddressRpcParam): Promise<number>;
    publishComment(commentProps: DecryptedChallengeRequest): Promise<RpcPublishResult>;
    publishCommentEdit(commentEditProps: DecryptedChallengeRequest): Promise<RpcPublishResult>;
    publishCommentModeration(commentModProps: DecryptedChallengeRequest): Promise<RpcPublishResult>;
    publishVote(voteProps: DecryptedChallengeRequest): Promise<RpcPublishResult>;
    publishSubplebbitEdit(subplebbitEdit: DecryptedChallengeRequest): Promise<RpcPublishResult>;
    commentUpdateSubscribe(args: CidRpcParam): Promise<number>;
    publishChallengeAnswers(subscriptionId: number, challengeAnswers: DecryptedChallengeAnswer["challengeAnswers"]): Promise<true>;
    resolveAuthorAddress(parsedAuthorAddress: SubplebbitAddressRpcParam): Promise<string | null>;
    initalizeSubplebbitschangeEvent(): Promise<void>;
    initalizeSettingschangeEvent(): Promise<void>;
    fetchCid(args: CidRpcParam): Promise<string>;
    setSettings(settings: z.input<typeof SetNewSettingsPlebbitWsServerSchema>): Promise<true>;
    rpcCall(method: string, params: any[]): Promise<any>;
    getDefaults(): Promise<void>;
    getPeers(): Promise<void>;
    getStats(): Promise<void>;
}
